/* --- Base Button --- */
.btn {
    display: inline-flex; align-items: center; justify-content: center; gap: 0.5em;
    font-weight: 500; line-height: 1.5; text-align: center; text-decoration: none;
    vertical-align: middle; cursor: pointer; user-select: none; background-color: transparent;
    border: 1px solid var(--input-border); padding: 0.55rem 1rem; font-size: 0.9rem;
    border-radius: var(--border-radius);
    transition: color var(--transition-speed-fast) ease-in-out,
                background-color var(--transition-speed-fast) ease-in-out,
                border-color var(--transition-speed-fast) ease-in-out,
                box-shadow var(--transition-speed) ease-in-out, /* Slower shadow transition */
                transform var(--transition-speed-fast) ease-in-out,
                filter var(--transition-speed-fast) ease-in-out; /* Add filter transition */
    will-change: transform, box-shadow, filter; /* Optimize transitions */
    color: var(--body-text);
}

.btn svg {
    width: 1em; height: 1em;
    /* Fix potential alignment issues */
    vertical-align: text-bottom;
    margin-bottom: 0.05em;
}

.btn:focus-visible {
    outline: 2px solid transparent; outline-offset: 2px;
    /* Use the global focus ring style from index.css */
    box-shadow: 0 0 0 2.5px color-mix(in srgb, var(--primary-color) calc(var(--focus-ring-opacity) * 100%), transparent);
    border-color: var(--input-focus-border);
}

.btn:disabled {
    pointer-events: none; opacity: var(--disabled-opacity);
}

.btn:not(:disabled):hover {
    border-color: var(--secondary-hover); background-color: var(--hover-bg);
    color: var(--body-text); transform: translateY(-2px) scale(1.02); /* Add subtle scale */
    box-shadow: var(--shadow-md); /* Slightly larger shadow on hover */
    filter: brightness(1.05); /* Slightly brighten */
}

.btn:not(:disabled):active {
    border-color: var(--secondary-active); background-color: color-mix(in srgb, var(--hover-bg) 90%, black 10%); /* Slightly darker active */
    color: var(--body-text); transform: translateY(0px) scale(0.99); /* Slight shrink on active */
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
    filter: brightness(0.98); /* Slightly darken */
    transition-duration: 0.05s; /* Faster active transition */
}

/* --- Variants --- */
.btnOutlineDanger { color: var(--danger-color); border-color: var(--danger-color); }
.btnOutlineDanger:not(:disabled):hover { background-color: var(--danger-color); border-color: var(--danger-color); color: white; transform: translateY(-2px) scale(1.02); box-shadow: var(--shadow-md); filter: brightness(1.05); }
.btnOutlineDanger:not(:disabled):active { background-color: var(--danger-active); border-color: var(--danger-active); color: white; transform: translateY(0px) scale(0.99); box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); filter: brightness(0.98); transition-duration: 0.05s; }
.btnOutlineDanger:focus-visible { box-shadow: 0 0 0 2.5px rgba(var(--danger-color-rgb) / var(--focus-ring-opacity)); border-color: var(--danger-hover); }

.btnOutlineSuccess { color: var(--success-color); border-color: var(--success-color); }
.btnOutlineSuccess:not(:disabled):hover { background-color: var(--success-color); border-color: var(--success-color); color: white; transform: translateY(-2px) scale(1.02); box-shadow: var(--shadow-md); filter: brightness(1.05); }
.btnOutlineSuccess:not(:disabled):active { background-color: var(--success-active); border-color: var(--success-active); color: white; transform: translateY(0px) scale(0.99); box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); filter: brightness(0.98); transition-duration: 0.05s; }
.btnOutlineSuccess:focus-visible { box-shadow: 0 0 0 2.5px rgba(var(--success-color-rgb) / var(--focus-ring-opacity)); border-color: var(--success-hover); }

.btnOutlineInfo { color: var(--info-color); border-color: var(--info-color); }
.btnOutlineInfo:not(:disabled):hover { background-color: var(--info-color); border-color: var(--info-color); color: white; transform: translateY(-2px) scale(1.02); box-shadow: var(--shadow-md); filter: brightness(1.05); }
.btnOutlineInfo:not(:disabled):active { background-color: var(--info-active); border-color: var(--info-active); color: white; transform: translateY(0px) scale(0.99); box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); filter: brightness(0.98); transition-duration: 0.05s; }
.btnOutlineInfo:focus-visible { box-shadow: 0 0 0 2.5px rgba(var(--info-color-rgb) / var(--focus-ring-opacity)); border-color: var(--info-hover); }
/* Ensure text color contrasts in dark mode for specific variants if needed */
body.dark-mode .btnOutlineInfo:not(:disabled):hover,
body.dark-mode .btnOutlineInfo:not(:disabled):active { color: var(--dark-color); }


.btnOutlineSecondary { color: var(--secondary-color); border-color: var(--input-border); }
.btnOutlineSecondary:not(:disabled):hover { background-color: var(--secondary-color); border-color: var(--secondary-color); color: white; transform: translateY(-2px) scale(1.02); box-shadow: var(--shadow-md); filter: brightness(1.05); }
.btnOutlineSecondary:not(:disabled):active { background-color: var(--secondary-active); border-color: var(--secondary-active); color: white; transform: translateY(0px) scale(0.99); box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); filter: brightness(0.98); transition-duration: 0.05s; }
.btnOutlineSecondary:focus-visible { box-shadow: 0 0 0 2.5px rgba(var(--secondary-color-rgb) / var(--focus-ring-opacity)); border-color: var(--secondary-hover); }
/* Ensure text color contrasts in dark mode for specific variants if needed */
body.dark-mode .btnOutlineSecondary:not(:disabled):hover,
body.dark-mode .btnOutlineSecondary:not(:disabled):active { color: var(--dark-color); }


/* Special styles for Dark Mode Toggle */
.darkModeToggle .iconSun,
body:not(.dark-mode) .darkModeToggle .iconMoon {
     display: none;
}
body.dark-mode .darkModeToggle .iconSun {
     display: inline-block;
}
body:not(.dark-mode) .darkModeToggle .iconMoon {
     display: inline-block;
}