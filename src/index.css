/* --- UI Refinement & Modern Look (v1.19 - Layout Adjustment) --- */
:root {
  /* Palet Tema Terang (Default) - Slightly softer blues, refined grays */
  --primary-color: #007aff; --primary-hover: #006de0; --primary-active: #005ec4;
  --secondary-color: #6c757d; --secondary-hover: #5a6268; --secondary-active: #545b62;
  --success-color: #28a745; --success-hover: #218838; --success-active: #1e7e34;
  --danger-color: #dc3545; --danger-hover: #c82333; --danger-active: #bd2130;
  --info-color: #17a2b8; --info-hover: #138496; --info-active: #117a8b;
  --warning-color: #ffc107; --warning-hover: #e0a800; --warning-active: #d39e00;
  --light-color: #f8f9fa; --dark-color: #212529;

  --body-bg: #fcfcfd; /* Even lighter off-white */
  --body-text: #343a40;
  --card-bg: #ffffff;
  --card-border: #e9ecef; /* Slightly lighter border */
  --canvas-bg: #ffffff; /* Default canvas bg (can be overridden by theme) */
  --canvas-bg-light: #ffffff; /* Explicit light theme canvas bg */
  --canvas-bg-dark: #ffffff;  /* Explicit dark theme canvas bg (keeping it white) */
  --canvas-border: #dee2e6; /* Slightly lighter canvas border */
  --input-border: #ced4da;
  --input-focus-border: var(--primary-color);
  --input-focus-shadow: rgba(0, 123, 255, 0.2); /* Softer focus shadow */
  --text-muted: #6c757d;
  --heading-color: #212529; /* Stronger heading */
  --picker-border-color: #e9ecef;

  --hover-bg: #f8f9fa; /* Standard light gray hover */
  --selected-bg: rgba(0, 123, 255, 0.08); /* More subtle selection */
  --selected-border: rgba(0, 123, 255, 0.2);
  --disabled-opacity: 0.55; /* Slightly less faded */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04), 0 2px 4px rgba(0, 0, 0, 0.04); /* Softer shadow */
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.05), 0 1px 3px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.06), 0 4px 6px rgba(0, 0, 0, 0.07);

  /* Warna Garis Panduan */
  --grid-slice-color: #adb5bd;
  --grid-reflect-line-color: #fd7e14;

  /* Layout */
  --canvas-target-size: 600px; /* Target size for canvas calculation */
  --controls-width: 330px; /* Slightly wider controls */
  --spacing: 1rem;
  --layout-gap: calc(var(--spacing) * 1.8); /* Adjusted gap */
  --border-radius: 0.6rem; /* Slightly larger radius */
  --font-family-sans-serif: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; /* Modern stack */
  --transition-speed: 0.18s; /* Slightly faster transitions */
  --transition-speed-fast: 0.12s;
  --focus-ring-opacity: 0.2;
}

/* --- Override Tema Gelap --- */
body.dark-mode {
  --primary-color: #4dabf7; --primary-hover: #74c0fc; --primary-active: #a5d8ff;
  --secondary-color: #909296; --secondary-hover: #adb5bd; --secondary-active: #ced4da; /* Adjusted grays */
  --success-color: #40c057; --success-hover: #69db7c; --success-active: #94f7ab;
  --danger-color: #fa5252; --danger-hover: #ff8787; --danger-active: #ffa8a8;
  --info-color: #3bc9db; --info-hover: #66d9e8; --info-active: #99e9f2;
  --warning-color: #fcc419; --warning-hover: #ffd868; --warning-active: #ffe09c;
  --light-color: #343a40; --dark-color: #f1f3f5;

  --body-bg: #121212; /* Standard dark bg */
  --body-text: #e0e0e0;
  --card-bg: #1e1e1e; /* Slightly lighter card */
  --card-border: #333; /* Subtle border */
  /* --canvas-bg: var(--canvas-bg-dark); */ /* Canvas bg is controlled by specific var */
  --canvas-border: #383838;
  --input-border: #444;
  --input-focus-border: var(--primary-color);
  --input-focus-shadow: rgba(77, 171, 247, 0.3);
  --text-muted: #9e9e9e; /* Lighter muted text */
  --heading-color: #ffffff; /* Brighter heading */
  --picker-border-color: #333;

  --hover-bg: #2c2c2c; /* Dark hover */
  --selected-bg: rgba(77, 171, 247, 0.12);
  --selected-border: rgba(77, 171, 247, 0.3);
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2), 0 2px 4px rgba(0, 0, 0, 0.25);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.25), 0 1px 3px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.3), 0 4px 6px rgba(0, 0, 0, 0.35);

  --grid-slice-color: #777;
  --grid-reflect-line-color: #fab005;
  --focus-ring-opacity: 0.3;
}
/* --- End Tema Gelap --- */

*, *::before, *::after { box-sizing: border-box; }

body {
  font-family: var(--font-family-sans-serif);
  display: flex; flex-direction: column; align-items: center;
  background-color: var(--body-bg); color: var(--body-text);
  margin: 0; padding: calc(var(--spacing) * 2); /* Standard padding */
  min-height: 100vh; font-size: 15.5px; /* Slightly smaller base font */
  line-height: 1.65; /* Slightly increased line height */
  transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
  -webkit-font-smoothing: antialiased; /* Smoother fonts */
  -moz-osx-font-smoothing: grayscale;
  /* Optional: Subtle background gradient */
  /* background-image: linear-gradient(to bottom, var(--body-bg), color-mix(in srgb, var(--body-bg) 95%, var(--secondary-color) 5%)); */
}

/* Define RGB versions for focus rings */
:root {
  --danger-color-rgb: 220, 53, 69;
  --success-color-rgb: 40, 167, 69;
  --info-color-rgb: 23, 162, 184;
  --secondary-color-rgb: 108, 117, 125;
  --primary-color-rgb: 0, 123, 255;
}
body.dark-mode {
  --danger-color-rgb: 250, 82, 82;
  --success-color-rgb: 64, 192, 87;
  --info-color-rgb: 59, 201, 219;
  --secondary-color-rgb: 144, 146, 150;
  --primary-color-rgb: 77, 171, 247;
}

/* General focus visibility (can be overridden by specific components) */
*:focus-visible {
  outline: 2px solid transparent;
  outline-offset: 2px;
  /* Use a slightly softer focus ring */
  box-shadow: 0 0 0 2.5px color-mix(in srgb, var(--primary-color) calc(var(--focus-ring-opacity) * 100%), transparent);
}

/* Add smooth scrolling */
html {
    scroll-behavior: smooth;
}

/* Improve scrollbar styling globally (optional, can conflict with component-specific) */
/* ::-webkit-scrollbar { width: 10px; height: 10px; }
::-webkit-scrollbar-track { background: var(--card-bg); border-radius: 5px; }
::-webkit-scrollbar-thumb { background-color: var(--secondary-color); border-radius: 5px; border: 2px solid var(--card-bg); }
::-webkit-scrollbar-thumb:hover { background-color: var(--secondary-hover); }
body { scrollbar-width: thin; scrollbar-color: var(--secondary-color) var(--card-bg); } */
/* Commented out global scrollbar to prefer component-specific */