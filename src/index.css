/* --- UI Refinement & Modern Look (v1.19 - Layout Adjustment) --- */
:root {
  /* Palet Tema Terang (Default) - Slightly softer blues, refined grays */
  --primary-color: #007aff; --primary-hover: #006de0; --primary-active: #005ec4;
  --secondary-color: #6c757d; --secondary-hover: #5a6268; --secondary-active: #545b62;
  --success-color: #28a745; --success-hover: #218838; --success-active: #1e7e34;
  --danger-color: #dc3545; --danger-hover: #c82333; --danger-active: #bd2130;
  --info-color: #17a2b8; --info-hover: #138496; --info-active: #117a8b;
  --warning-color: #ffc107; --warning-hover: #e0a800; --warning-active: #d39e00;
  --light-color: #f8f9fa; --dark-color: #212529;

  /* Warna baru untuk background biru awan */
  --sky-blue-light: #e6f2ff;
  --sky-blue: #c2e0ff;
  --sky-blue-dark: #86bbf2;
  
  --body-bg: var(--sky-blue-light); /* Background biru awan light */
  --body-text: #343a40;
  --card-bg: #ffffff;
  --card-border: rgba(255, 255, 255, 0.25); /* Transparent border for glass effect */
  --canvas-bg: #ffffff; /* Default canvas bg (can be overridden by theme) */
  --canvas-bg-light: #ffffff; /* Explicit light theme canvas bg */
  --canvas-bg-dark: #ffffff;  /* Explicit dark theme canvas bg (keeping it white) */
  --canvas-border: #dee2e6; /* Slightly lighter canvas border */
  --input-border: #ced4da;
  --input-focus-border: var(--primary-color);
  --input-focus-shadow: rgba(0, 123, 255, 0.2); /* Softer focus shadow */
  --text-muted: #6c757d;
  --heading-color: #1a5089; /* Deeper blue for heading */
  --picker-border-color: #e9ecef;

  --hover-bg: #f8f9fa; /* Standard light gray hover */
  --selected-bg: rgba(0, 123, 255, 0.08); /* More subtle selection */
  --selected-border: rgba(0, 123, 255, 0.2);
  --disabled-opacity: 0.55; /* Slightly less faded */
  
  /* Improved shadows for depth */
  --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.12);
  --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.1), 0 6px 10px rgba(0, 0, 0, 0.15);
  --shadow-glass: 0 8px 32px rgba(31, 38, 135, 0.15);

  /* Efek glass morphism */
  --glass-bg: rgba(255, 255, 255, 0.6);
  --glass-bg-hover: rgba(255, 255, 255, 0.8);
  --glass-border: rgba(255, 255, 255, 0.18);
  --glass-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);

  /* Warna Garis Panduan */
  --grid-slice-color: #adb5bd;
  --grid-reflect-line-color: #fd7e14;

  /* Layout */
  --canvas-target-size: 550px; /* Adjusted for better layout */
  --controls-width: 330px; /* Panel kontrol di kanan */
  --spacing: 1rem;
  --layout-gap: calc(var(--spacing) * 1.8); /* Adjusted gap */
  --border-radius: 0.8rem; /* Larger radius for modern look */
  --border-radius-lg: 1.2rem; /* Extra large radius for cards */
  --font-family-sans-serif: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; /* Modern stack */
  --transition-speed: 0.25s; /* Slightly slower for smoother transitions */
  --transition-speed-fast: 0.15s;
  --focus-ring-opacity: 0.2;
}

/* --- Override Tema Gelap --- */
body.dark-mode {
  --primary-color: #4dabf7; --primary-hover: #74c0fc; --primary-active: #a5d8ff;
  --secondary-color: #909296; --secondary-hover: #adb5bd; --secondary-active: #ced4da; /* Adjusted grays */
  --success-color: #40c057; --success-hover: #69db7c; --success-active: #94f7ab;
  --danger-color: #fa5252; --danger-hover: #ff8787; --danger-active: #ffa8a8;
  --info-color: #3bc9db; --info-hover: #66d9e8; --info-active: #99e9f2;
  --warning-color: #fcc419; --warning-hover: #ffd868; --warning-active: #ffe09c;
  --light-color: #343a40; --dark-color: #f1f3f5;

  /* Dark mode sky blues */
  --sky-blue-dark: #102841;
  --sky-blue: #153957;
  --sky-blue-light: #1d4e78;

  --body-bg: var(--sky-blue-dark); /* Dark blue background */
  --body-text: #e0e0e0;
  --card-bg: rgba(30, 30, 40, 0.75); /* Semi-transparent card */
  --card-border: rgba(80, 80, 95, 0.2); /* Subtle border */
  --canvas-border: #383838;
  --input-border: #444;
  --input-focus-border: var(--primary-color);
  --input-focus-shadow: rgba(77, 171, 247, 0.3);
  --text-muted: #9e9e9e; /* Lighter muted text */
  --heading-color: #8ecdf9; /* Light blue heading */
  --picker-border-color: #333;

  --hover-bg: rgba(44, 44, 60, 0.7); /* Semi-transparent hover */
  --selected-bg: rgba(77, 171, 247, 0.12);
  --selected-border: rgba(77, 171, 247, 0.3);
  
  /* Darker shadows */
  --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.25), 0 1px 2px rgba(0, 0, 0, 0.35);
  --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.4);
  --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.35), 0 6px 10px rgba(0, 0, 0, 0.45);
  --shadow-glass: 0 8px 32px rgba(0, 0, 0, 0.35);

  /* Glass morphism dark */
  --glass-bg: rgba(30, 30, 40, 0.7);
  --glass-bg-hover: rgba(40, 40, 50, 0.8);
  --glass-border: rgba(80, 80, 95, 0.2);

  --grid-slice-color: #777;
  --grid-reflect-line-color: #fab005;
  --focus-ring-opacity: 0.3;
}
/* --- End Tema Gelap --- */

*, *::before, *::after { box-sizing: border-box; }

body {
  font-family: var(--font-family-sans-serif);
  display: flex; flex-direction: column; align-items: center;
  background-color: var(--body-bg);
  color: var(--body-text);
  margin: 0; 
  padding: calc(var(--spacing) * 2);
  min-height: 100vh; 
  font-size: 15.5px;
  line-height: 1.65;
  transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  
  /* Background gradient dengan pola awan */
  background-image: 
    linear-gradient(to bottom, 
      rgba(255,255,255,0.1) 0%,
      rgba(255,255,255,0.05) 50%,
      rgba(255,255,255,0) 100%),
    radial-gradient(
      circle at 90% 10%,
      var(--sky-blue) 0%,
      transparent 40%
    ),
    radial-gradient(
      circle at 10% 80%,
      var(--sky-blue-dark) 0%,
      transparent 50%
    );
  background-attachment: fixed;
  background-size: cover;
}

body.dark-mode {
  background-image: 
    linear-gradient(to bottom, 
      rgba(0,0,0,0.3) 0%,
      rgba(0,0,0,0.1) 100%),
    radial-gradient(
      circle at 90% 10%,
      var(--sky-blue) 0%,
      transparent 60%
    ),
    radial-gradient(
      circle at 10% 80%,
      rgba(10, 20, 40, 0.8) 0%,
      transparent 50%
    );
}

/* Define RGB versions for focus rings */
:root {
  --danger-color-rgb: 220, 53, 69;
  --success-color-rgb: 40, 167, 69;
  --info-color-rgb: 23, 162, 184;
  --secondary-color-rgb: 108, 117, 125;
  --primary-color-rgb: 0, 123, 255;
}
body.dark-mode {
  --danger-color-rgb: 250, 82, 82;
  --success-color-rgb: 64, 192, 87;
  --info-color-rgb: 59, 201, 219;
  --secondary-color-rgb: 144, 146, 150;
  --primary-color-rgb: 77, 171, 247;
}

/* General focus visibility (can be overridden by specific components) */
*:focus-visible {
  outline: 2px solid transparent;
  outline-offset: 2px;
  /* Use a slightly softer focus ring */
  box-shadow: 0 0 0 2.5px color-mix(in srgb, var(--primary-color) calc(var(--focus-ring-opacity) * 100%), transparent);
}

/* Add smooth scrolling */
html {
    scroll-behavior: smooth;
}

/* Improved scrollbar styling globally */
::-webkit-scrollbar { 
  width: 10px; 
  height: 10px; 
}
::-webkit-scrollbar-track { 
  background: rgba(var(--primary-color-rgb), 0.05);
  border-radius: 8px; 
}
::-webkit-scrollbar-thumb { 
  background-color: rgba(var(--secondary-color-rgb), 0.5); 
  border-radius: 8px; 
  border: 2px solid var(--body-bg); 
  transition: background-color var(--transition-speed-fast);
}
::-webkit-scrollbar-thumb:hover { 
  background-color: rgba(var(--secondary-color-rgb), 0.7);
}
body { 
  scrollbar-width: thin; 
  scrollbar-color: var(--secondary-color) var(--body-bg); 
}

/* Animation keyframes for use with elements */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideInUp {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Utility class for glass morphism */
.glass {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-glass);
}